package config

import (
	"encoding/json"
	"io/ioutil"
	"log"
)

type ConfigBind struct {
	Schema string
	Port   int
}

//Config 定义程序配置文件
type Config struct {
	Driver         string
	DefaultURL     string
	ConnectString  string
	Env            string
	NotMinify      bool //不要压缩css和js
	Bind           []ConfigBind
	SessionTimeout float64
	UpdateURL      string //订阅制度的URL，自动会下载static.zip等
}

//ReadConfig 读取磁盘配置
func ReadConfig(fileName string) *Config {
	config := &Config{}

	log.Println("load config:", fileName)
	if bys, err := ioutil.ReadFile(fileName); err == nil {
		err = json.Unmarshal(bys, config)
		if err != nil {
			log.Panic(err)
		}
	}
	return config
}
