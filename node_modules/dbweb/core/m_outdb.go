package core

import "github.com/linlexing/dbx/ddb"

const (
	//ModelOuterdbName 是具体的表名
	ModelOuterdbName = "OUTERDB"
)

//ModelOuterDB 外部数据库列表
type ModelOuterDB struct {
	Name    string `dbx:"STR(50) PRIMARY KEY"`
	Driver  string `dbx:"STR(50) NOT NULL"`
	CntStr  string `dbx:"STR(300) NOT NULL"`
	MyTable bool   `dbx:"INT NOT NULL"`
}

func init() {
	RegisterModel(ModelOuterDB{}, 1, false, ModelOuterdbName)
}

//OuterDBNames 获取所有的名称
func OuterDBNames(db ddb.DB) []string {
	dbNames, err := ddb.ScanStrings(db, "select NAME from outerdb order by name")
	if err != nil {
		LOG.Panic(err)
	}
	return dbNames
}
