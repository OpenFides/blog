<script src="/js/ace/ace.js" type="text/javascript" charset="utf-8"></script>
[[$files := newFiles]]
[[append $files "/flib/uri.js/src/URI.js" "/flib/uri.js/src/URI.min.js"]]
[[append $files "sqlrun.js"]]
<script src="[[concat $files]]" type="text/javascript" charset="utf-8"></script>
<style>
	#edtSql {
		border: 1px solid #ccc;
		font-size:13px;
		height:400px;
	}
</style>
<form class="form" action="{{.Req.URL.String}}"  method="post">
	<div class="form-group">
		<input type="hidden" name="sql" id="hidSql">
		<div id="edtSql"></div>
	</div>
	<input type="hidden" id="cmdtype" name="cmdtype">
	<div class="form-group">
		<button id="btnSelect" class="btn btn-default" type="button">检索</button>
		<button id="btnExecute" class="btn btn-default" type="button">运行</button>
	</div>
	<div id="divResult" class="form-group">
		{{if .More.UsedTime}}
		{{printf "耗时%.3f秒" .More.UsedTime}}
		{{end}}
		{{if .More.Error}}
			{{.More.Error}}
		{{else if .More.CmdResult}}
			{{.More.CmdResult}}
		{{else}}
			<table class="table table-striped table-bordered table-hover table-condensed">
				<thead>
					<tr>
					{{range .More.Columns}}
						<th>{{.}}</th>
					{{end}}
					</tr>
				</thead>
				<tbody>
				{{range $row := .More.Result}}
					<tr>
					{{range $.More.Columns}}
						<td>{{index $row .}}</td>
					{{end}}
					</tr>
				{{end}}
				</tbody>
			</table>
		{{end}}
	</div>
</form>
<script>
	initSQLRun({{.More.Sql}});
</script>