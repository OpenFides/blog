function newConditionRow(data) {
	var row = $("#cnt_row_tmpl").clone(true);
	row.find(".field").select2();
	row.find(".opt").select2();
	row.attr("id", "");
	row.find(".leftb").val(data.LeftBrackets);
	row.find(".field").val(data.ColumnName).trigger("change");
	row.find(".opt").val(data.Operators).trigger("change");
	row.find(".value").val(data.Value);
	row.find(".rightb").val(data.RightBrackets);
	if (data.Logic == "")
		row.find(".logic").val("AND");
	else
		row.find(".logic").val(data.Logic);

	return row;
}
function getDataFromConditionRow(row) {
	row = $(row);
	var data = {
		LeftBrackets: row.find(".leftb").val(),
		ColumnName: row.find(".field").val(),
		Operators: row.find(".opt").val(),
		Value: row.find(".value").val(),
		RightBrackets: row.find(".rightb").val(),
		Logic: row.find(".logic").val()
	};
	if (!data.Operators || !data.ColumnName) {
		return null;
	}
	return data;
}
$(function () {
	$("#cnt_row_tmpl .btnAdd").click(function () {
		newConditionRow({ Logic: "AND" }).insertAfter($(this).closest("div.row"));
	});
	$("#cnt_row_tmpl .btnDelete").click(function () {
		var row = $(this).closest("div.row");
		if (row.parent().find("div.row").length > 2) {
			row.remove();
		} else {
			row.find(".leftb").val("");
			row.find(".field").val("").trigger("change");
			row.find(".opt").val("").trigger("change");
			row.find(".value").val("");
			row.find(".rightb").val("");
			row.find(".logic").val("AND");
		}
	});
});