function initLinesEdit(sessionTextURL) {
	$('#linesEdit').on('shown.bs.modal', function (event) {
		$('#linesEdit textarea').focus();
	});
	$('#linesEdit').on('show.bs.modal', function (event) {
		var button = $(event.relatedTarget) // Button that triggered the modal
		var isMain = button.data('main');
		var editBox = button.parent().prev();
		var val = editBox.val();
		//如果是单条件，且是缩写，则去服务器取具体的内容
		if (isMain == 'y' && val.indexOf("$$:") == 0) {
			$.get(sessionTextURL + "&id=" + val.substr(3), function (data) {
				if (data.Err.length > 0) {
					alert(data.Err);
					return;
				}
				var arrv = Papa.parse(data.Val).data[0];
				if (arrv) {
					$('#linesEdit textarea').val(arrv.join("\n"));
				} else {
					$('#linesEdit textarea').val("");
				}
			});
		} else {
			var arrv = Papa.parse(editBox.val()).data[0];
			if (arrv) {
				$('#linesEdit textarea').val(arrv.join("\n"));
			} else {
				$('#linesEdit textarea').val("");
			}
		}
		$('#linesEdit .btn-primary').off('click').click(function () {
			var data = $.trim($('#linesEdit textarea').val());
			if (data) {
				var csv = Papa.unparse([data.split("\n")]);
				//超长就用缩写
				if (isMain && csv.length > 1024) {
					$.post(sessionTextURL, JSON.stringify({ Val: csv }), function (data) {
						if (data.Err.length > 0) {
							alert(data.Err);
						} else {
							editBox.val("$$:" + data.ID);
							$('#linesEdit').modal('hide');
						}
					});
				} else {
					editBox.val(csv);
					$('#linesEdit').modal('hide');
				}
			} else {
				editBox.val("");
				$('#linesEdit').modal('hide');
			}
		});
	});
}