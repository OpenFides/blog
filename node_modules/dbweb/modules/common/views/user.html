<style type="text/css">
.rolerow{
	padding-left:15px;
}
.lock + label{
    opacity: 0.65;
}
</style>
<form  class="form-horizontal">
	<div class="form-group form-group-sm">
		<label for="fldID" class="control-label col-md-1 bill-label">名称:</label>
		<div class="col-md-5">
		{{template "_bill/input" (.Field "NAME")}}
		</div>
		<label for="fldNAME" class="control-label col-md-1 bill-label">昵称:</label>
		<div class="col-md-5">
		{{template "_bill/input" (.Field "NICKNAME")}}
		</div>
	</div>
	<div class="form-group form-group-sm">
		<label for="fldPASSWORD" class="control-label col-md-1 bill-label">密码:</label>
		<div class="col-md-5">
		{{template "_bill/password" (.Field "PASSWORD")}}
		</div>
		<label for="fldDEPT" class="control-label col-md-1 bill-label">所属部门:</label>
		<div class="col-md-5">
		{{template "_bill/input" (.Field "DEPT")}}
		</div>
	</div>
	<div class="form-group form-group-sm">
		<label for="fldFREEZETIME" class="control-label col-md-1 bill-label">冻结到期:</label>
		<div class="col-md-5">
		{{template "_bill/input" (.Field "FREEZETIME")}}
		</div>
		<label for="fldFREEZEDESC" class="control-label col-md-1 bill-label">冻结原因:</label>
		<div class="col-md-5">
		{{template "_bill/input" (.Field "FREEZEDESC")}}
		</div>
	</div>
	<div class="form-group form-group-sm">
		<label for="fldTAG" class="control-label col-md-1 bill-label">附加信息:</label>
		<div class="col-md-11">
		{{template "_bill/input" (.Field "TAG")}}
		</div>
	</div>
	<div class="form-group">
		<label for="fldUSERROLE" class="control-label col-md-1 bill-label">角色:</label>
		<div class="col-md-11" id="fldUSERROLE" data-bill-childname="USERROLE" >
		{{range $idx,$role := .More.Roles}}
			{{if eq 0 (mod $idx 4)}}
			<div class="row rolerow">
			{{end}}
				<div class="col-md-3 checkbox">
					<input id="chk{{$idx}}" type="checkbox" data-value="{{$role.Name}}" {{if in $.Param.Operate "delete" "browse"}} disabled{{end}}
						{{if eq "always" $role.Type -}}
							onclick="return false;" class="lock" checked="checked" -}}
						{{else if findWhere $.Record.Child.USERROLE (mkmap "ROLENAME" $role.Name) -}}
							checked="checked"
						{{- end}}>
					<label for="chk{{$idx}}">{{$role.Name}}</label>
				</div>
			{{if eq 0 (mod (inc $idx) 4)}}
			</div>
			{{end}}
		{{end}}
		</div>
	</div>

</form>
<script>
	$("#fldUSERROLE").data("oncollection",function(){
		return $("#fldUSERROLE :checked").map(function(){
			return {"ROLENAME":$(this).data("value")};
		}).get();
	});
</script>