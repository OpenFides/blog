package common

import (
	"dbweb/core"
)

type Version struct{}
type versionData struct {
	Name   string
	Logs   core.ChangeLogs
	MaxVer int64
}

func init() {
	core.RegisterFun("version", new(Version), "_layout/blank")
}
func (v *Version) Get(p *core.ElementHandleArgs) {
	data := []versionData{}
	for _, name := range core.VersionModules {
		data = append(data, versionData{
			Name:   name,
			Logs:   core.Versions[name],
			MaxVer: core.Versions[name].Version(),
		})
	}
	p.More["Versions"] = data
	p.HTML()
}
