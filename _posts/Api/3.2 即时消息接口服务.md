## 客服接收消息
使用http长轮询方式获取即时消息，消息应该包括操作和内容。其中操作必需，内容视操作类型而定。
### 请求方式
POST http://sparkapi.accuat.com/message/query
4.4.2	请求参数
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>
   </tr>
   <tr>
      <td>LastVersion</td>
      <td>String</td>
      <td>否</td>
      <td>版本号,为空时即时消息;
 不为空时:获取此版本以后的历史消息;
 历史消息最多获得最近一周的消息。</td>
   </tr>
   <tr>
      <td>Acks</td>
      <td>String</td>
      <td>否</td>
      <td>确认之前接收过的消息</td>
   </tr>
</table>
### 响应参数
如果请求失败，返回错误和错误内容，如果成功返回操作的列表：
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>
   </tr>
   <tr>
      <td>Operation</td>
      <td>List</td>
      <td>是</td>
      <td>所有消息</td>
   </tr>
</table>
#### Operation对象
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>      
   </tr>
   <tr>
      <td>Type</td>
      <td>操作类型</td>
      <td>Int</td>
      <td>0-AddSession;1-DelSession</td>
   </tr>
   <tr>
      <td>SessionId</td>
      <td>String</td>
      <td>是</td>
      <td>唯一会话Id</td>
   </tr>
   <tr>
      <td>SessionType</td>
      <td>Int</td>
      <td>否</td>
      <td>会话类型，参考会话类型</td>
   </tr>
   <tr>
      <td>FromId</td>
      <td>String</td>
      <td>否</td>
      <td>发送者ID</td>
   </tr>
   <tr>
      <td>FromName</td>
      <td>String</td>
      <td>否</td>
      <td>发送者名称</td>
   </tr>
   <tr>
      <td>FromImage</td>
      <td>String</td>
      <td>否</td>
      <td>发送者头像</td>
   </tr>
   <tr>
      <td>ToId</td>
      <td>String</td>
      <td>否</td>
      <td>接收者ID</td>
   </tr>
   <tr>
      <td>ToName</td>
      <td>String</td>
      <td>否</td>
      <td>接收者名称</td>
   </tr>
   <tr>
      <td>ToImage</td>
      <td>String</td>
      <td>否</td>
      <td>接收者头像</td>
   </tr>
   <tr>
      <td>Message</td>
      <td>List</td>
      <td>否</td>
      <td>消息内容</td>
    </tr>
</table>
#### Message对象
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>      
   </tr>
   <tr>
      <td>Type</td>
      <td>Int</td>
      <td>是</td>
      <td>消息类型:0 – 接收;1 – 发送</td>
   </tr>
   <tr>
      <td>Id</td>
      <td>String</td>
      <td>是</td>
      <td>消息Id唯一，用于客户端去重</td>
   </tr>
   <tr>
      <td>ContentType</td>
      <td>String</td>
      <td>是</td>
      <td>内容类型:0 – 文本;1 – 图片</td>
   </tr>
   <tr>
      <td>Content</td>
      <td>String</td>
      <td>是</td>
  	  <td>内容类型为图片时内容只是图片的Url</td>
   </tr>
   <tr>
      <td>CreateTime</td>
      <td>String</td>
      <td>是</td>
	  <td>创建时间：yyyy-MM-dd HH:mm:ss，用于客户端排序</td>
   </tr>
</table>

## 客服发送消息
发送消息给到客户
### 请求方式
POST http://sparkapi.accuat.com/message/send
### 请求参数
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>      
   </tr>
   <tr>
      <td>SessionId</td>
      <td>String</td>
      <td>是</td>
      <td>会话ID,如果是客服发起的基于历史消息会话，可以为空。但需要在客户端confirm是否为新会话</td>
   </tr>
   <tr>
      <td>ToId</td>
      <td>String</td>
      <td>是</td>
      <td>接收者ID</td>
   </tr>
   <tr>
      <td>ContentType</td>
      <td>String</td>
      <td>是</td>
      <td>内容类型：0 – 文本; 1 – 图片</td>
   </tr>
   <tr>
      <td>Content</td>
      <td>String</td>
      <td>是</td>
      <td>内容类型为图片时内容只是图片的Url</td>
   </tr>
   <tr>
      <td>CreateTime</td>
      <td>String</td>
      <td>是</td>
      <td>创建时间：yyyy-MM-dd HH:mm:ss，用于客户端排序</td>
   </tr>
</table>
### 响应参数
如果发送失败，返回错误和错误内容。发送成功返回正确即可。

## 客服人员结束会话
客服人员结束会话主动关闭当前会话
### 请求方式
POST http://sparkapi.accuat.com/session/close
###	请求参数
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>      
   </tr>
   <tr>
      <td>SessionId</td>
      <td>String</td>
      <td>是</td>
      <td>会话ID, 需要关闭的会话ID</td>
   </tr>
</table>
### 响应参数
如果请求失败，返回错误和错误内容。请求成功返回正确即可。

## 客服人员重启会话
客服人员结束会话主动关闭当前会话
### 请求方式
POST http://sparkapi.accuat.com/session/restart
### 请求参数
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>      
   </tr>
   <tr>
      <td>SessionId</td>
      <td>String</td>
      <td>是</td>
      <td>会话ID, 需要重启的会话ID</td>
   </tr>
</table>
### 响应参数
如果请求失败，返回错误和错误内容。请求成功返回正确即可。
## 客服转移会话
客服人员可以将当前会话转移到其它客服人员;
约束条件：
1.	当前会话有效
2.	新客服人员在线


后续操作：
1.	是否需要通知客户已经有新客服人员接管会话？
2.	新客服的第一响应时间以接入时间开始计算
### 请求方式
POST http://sparkapi.accuat.com/session/transfer
### 请求参数
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>      
   </tr>
   <tr>
      <td>SessionId</td>
      <td>String</td>
      <td>是</td>
      <td>会话ID, 需要关闭的会话ID</td>
   </tr>
   <tr>
      <td>ToNewId</td>
      <td>String</td>
      <td>是</td>
      <td>新客服Id, 需要关闭的会话ID</td>
   </tr>
</table>
### 响应参数
如果请求失败，返回错误和错误内容。请求成功返回正确即可。