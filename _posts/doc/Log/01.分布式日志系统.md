# 分布式日志系统 ELK
Elasticsearch LogStash、Kibana
安装地址：[https://www.elastic.co/products] 
## Elasticsearch 
Elasticsearch 是一个具有强大索引功能的文档存储库，并且可以通过 REST API 来搜索数据。基于 Apache Lucene，使用 Java 编写

ElasticSearch不仅仅只提供对这些被索引文档的强大搜索功能。快速、分布式、水平扩展，支持实时文档存储和分析，支持数百台服务器和 PB 级索引数据。
```
//端口：9200

```

## Kibana 
Kibana 是 Elasticsearch 中专门提供强有力的可视化查询Web应用程序。使用Kibana，能非常简单地为 Elasticsearch 中索引的数据创建查询、图表和仪表盘。

需要配置elasticsearch服务地址，比如：
```
//端口：5601
elasticsearch.url："http://localhost:9200"
```


## Logstash
Logstash是一个具备实时处理能力的开源的数据收集引擎。可以动态地从不同的来源收集数据，将数据处理（过滤、变形）过之后统一输出到某个特定地址，为将来更多样化的数据分析做准备。
logstash采用input,filter,output的三段配置法。input配置输入源，filter配置对输入源中的信息怎样进行处理，而output配置输出位置。
```
//新增配置信息
vi nlog.conf
input {
   tcp {
      host => "localhost"
      port => 8001
   }
}
filter {
   //使用grok 插件，自定义消息格式，推荐使用grokdebug在线进行调试
   //grok pattren的语法为：%{SYNTAX:semantic}
}
output {
   elasticsearch {
       hosts => ["localhost:9200"]
       index => "service_api"
       document_type => "logs“
   }
}
```
### 常用的命令
1. -f：通过这个命令可以指定Logstash的配置文件，根据配置文件配置logstash
2. -e：后面跟着字符串，该字符串可以被当做logstash的配置（如果是“” 则默认使用stdin作为输入，stdout作为输出）
3. -l：日志输出的地址（默认就是stdout直接在控制台中输出）
4. -t：测试配置文件是否正确，然后退出。
5. 

