---
layout: post
title:  GIT知识汇总
---

# git 提交量 top 5

```shell
git log --pretty='%aN' | sort | uniq -c | sort -k1 -n -r | head -n 5
```

# 提交量


```shell
git log --since ==2020-01-01 --until=2020-01-31 --shortstat --pretty="%cE" | sed 's/\(.*\)@.*/\1/' | grep -v "^$" | awk 'BEGIN { line=""; } !/^ / { if (line=="" || !match(line, $0)) {line = $0 "," line }} /^ / { print line " # " $0; line=""}' | sort | sed -E 's/# //;s/ files? changed,//;s/([0-9]+) ([0-9]+ deletion)/\1 0 insertions\(+\), \2/;s/\(\+\)$/\(\+\), 0 deletions\(-\)/;s/insertions?\(\+\), //;s/ deletions?\(-\)//' | awk 'BEGIN {name=""; files=0; insertions=0; deletions=0;} {if ($1 != name && name != "") { print name ": " files " files changed, " insertions " insertions(+), " deletions " deletions(-), " insertions-deletions " net"; files=0; insertions=0; deletions=0; name=$1; } name=$1; files+=$2; insertions+=$3; deletions+=$4} END {print name ": " files " files changed, " insertions " insertions(+), " deletions " deletions(-), " insertions-deletions " net";}'

git log --since ==2020-02-01 --until=2020-02-28 --shortstat --pretty="%cE" | sed 's/\(.*\)@.*/\1/' | grep -v "^$" | awk 'BEGIN { line=""; } !/^ / { if (line=="" || !match(line, $0)) {line = $0 "," line }} /^ / { print line " # " $0; line=""}' | sort | sed -E 's/# //;s/ files? changed,//;s/([0-9]+) ([0-9]+ deletion)/\1 0 insertions\(+\), \2/;s/\(\+\)$/\(\+\), 0 deletions\(-\)/;s/insertions?\(\+\), //;s/ deletions?\(-\)//' | awk 'BEGIN {name=""; files=0; insertions=0; deletions=0;} {if ($1 != name && name != "") { print name ": " files " files changed, " insertions " insertions(+), " deletions " deletions(-), " insertions-deletions " net"; files=0; insertions=0; deletions=0; name=$1; } name=$1; files+=$2; insertions+=$3; deletions+=$4} END {print name ": " files " files changed, " insertions " insertions(+), " deletions " deletions(-), " insertions-deletions " net";}'

git log --since ==2020-03-01 --until=2020-03-31 --shortstat --pretty="%cE" | sed 's/\(.*\)@.*/\1/' | grep -v "^$" | awk 'BEGIN { line=""; } !/^ / { if (line=="" || !match(line, $0)) {line = $0 "," line }} /^ / { print line " # " $0; line=""}' | sort | sed -E 's/# //;s/ files? changed,//;s/([0-9]+) ([0-9]+ deletion)/\1 0 insertions\(+\), \2/;s/\(\+\)$/\(\+\), 0 deletions\(-\)/;s/insertions?\(\+\), //;s/ deletions?\(-\)//' | awk 'BEGIN {name=""; files=0; insertions=0; deletions=0;} {if ($1 != name && name != "") { print name ": " files " files changed, " insertions " insertions(+), " deletions " deletions(-), " insertions-deletions " net"; files=0; insertions=0; deletions=0; name=$1; } name=$1; files+=$2; insertions+=$3; deletions+=$4} END {print name ": " files " files changed, " insertions " insertions(+), " deletions " deletions(-), " insertions-deletions " net";}'

git log --since ==2020-04-01 --until=2020-04-30 --shortstat --pretty="%cE" | sed 's/\(.*\)@.*/\1/' | grep -v "^$" | awk 'BEGIN { line=""; } !/^ / { if (line=="" || !match(line, $0)) {line = $0 "," line }} /^ / { print line " # " $0; line=""}' | sort | sed -E 's/# //;s/ files? changed,//;s/([0-9]+) ([0-9]+ deletion)/\1 0 insertions\(+\), \2/;s/\(\+\)$/\(\+\), 0 deletions\(-\)/;s/insertions?\(\+\), //;s/ deletions?\(-\)//' | awk 'BEGIN {name=""; files=0; insertions=0; deletions=0;} {if ($1 != name && name != "") { print name ": " files " files changed, " insertions " insertions(+), " deletions " deletions(-), " insertions-deletions " net"; files=0; insertions=0; deletions=0; name=$1; } name=$1; files+=$2; insertions+=$3; deletions+=$4} END {print name ": " files " files changed, " insertions " insertions(+), " deletions " deletions(-), " insertions-deletions " net";}'
```





默认情况下,当您将文件添加到存储库时,Git将尝试遵循其文件系统属性并相应地设置正确的文件模式.您可以通过将core.fileMode选项设置为false来禁用此功能：
```sh
git config core.fileMode false
```

如果您遇到问题,Git文件模式未设置但文件具有正确的文件系统标志,请尝试删除模式并再次设置：
```sh
git update-index --chmod=-x path/to/file
git update-index --chmod=+x path/to/file
```
从Git 2.9开始,您可以使用单个命令暂存文件并设置标志：
```sh
git add --chmod=+x path/to/file
```
```sh
find ./  | grep -E 'install.sh' | xargs -t -I{} git update-index --chmod=+x {}
```


```sh
git filter-branch --force --env-filter '
if [ "$GIT_COMMITTER_NAME" = "zhumw" ];
then
    GIT_COMMITTER_NAME="zhumw";
    GIT_COMMITTER_EMAIL="zhumw@mti-sh.cn";
    GIT_AUTHOR_NAME="zhumw";
    GIT_AUTHOR_EMAIL="zhumw@mti-sh.cn";
fi
if [ "$GIT_COMMITTER_NAME" = "gaojin" ];
then
    GIT_COMMITTER_NAME="gaojin";
    GIT_COMMITTER_EMAIL="gaojin@mti-sh.cn";
    GIT_AUTHOR_NAME="gaojin";
    GIT_AUTHOR_EMAIL="gaojin@mti-sh.cn";
fi
if [ "$GIT_COMMITTER_NAME" = "haorengao" ];
then
    GIT_COMMITTER_NAME="haorg";
    GIT_COMMITTER_EMAIL="haorg@mti-sh.cn";
    GIT_AUTHOR_NAME="haorg";
    GIT_AUTHOR_EMAIL="haorg@mti-sh.cn";
fi
if [ "$GIT_COMMITTER_NAME" = "yushouling" ];
then
    GIT_COMMITTER_NAME="yusl";
    GIT_COMMITTER_EMAIL="yusl@mti-sh.cn";
    GIT_AUTHOR_NAME="yusl";
    GIT_AUTHOR_EMAIL="yusl@mti-sh.cn";
fi' -- --all

git push --force --tags origin 'refs/heads/*'


```
